syntax = "proto3";
package peering;

service PeeringNode {
  rpc Introduce (IntroductionRequest) returns (IntroductionReply);
  rpc ListPeers (ListPeersRequest) returns (ListPeersReply);

  rpc getKey (GetKeyRequest) returns (GetKeyReply);
  rpc store (StoreRequest) returns (StoreReply);

  rpc checkHealth (HealthCheckRequest) returns (HealthCheckReply);
}

message IntroductionRequest {
  string senderAdress = 1;
}

message IntroductionReply {
  repeated Peer knownPeers = 1;
}

message ListPeersRequest {}

message Peer {
  string addr = 1;
  string hash = 2;
}

message ListPeersReply {
  repeated Peer knownPeers = 1;
}

message HealthCheckRequest { }

message HealthCheckReply { }


message StoreRequest {
  string value = 1;
  int32 hops = 2;
}

message StoreReply {
  string key = 1;
  string storedIn = 2;
}

message GetKeyRequest {
  /* string */ 
}

message GetKeyReply {

}


